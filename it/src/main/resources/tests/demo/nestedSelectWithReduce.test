{
    "name": "select reduction from nested select",
    "backends": {
        "couchbase":         "skip",
        "marklogic_json":    "skip",
        "marklogic_xml":     "skip",
        "mimir":             "skip",
        "mongodb_2_6":       "skip",
        "mongodb_3_0":       "skip",
        "mongodb_3_2":       "skip",
        "mongodb_3_4":       "skip",
        "mongodb_read_only": "skip",
        "spark_hdfs":        "skip",
        "spark_local":       "skip",
        "spark_cassandra":   "skip"
    },
    "NB": "When we enable pendingIgnoreFieldOrder for mimir, the test suite claims
           the test is fixed even though it isn't. So this is a bug in our test
           infrastructure. But the test is also broken for mimir.",
    "NB2": "All tests are skipped because they sometimes pass and sometimes fail.",
    "data": "patients.data",
    "query": "SELECT AVG(cnt) as measure, state as category FROM
                (SELECT COUNT(*) as cnt, state, gender FROM patients
                WHERE codes[*].desc LIKE \"%flu%\"
                GROUP BY state, gender
                ORDER BY COUNT(*) DESC, state ASC) as meh",
    "predicate": "initial",
    "expected": [{ "measure": 1.238095238095, "category": "NE" },
                 { "measure": 1.238095238095, "category": "AL" },
                 { "measure": 1.238095238095, "category": "MS" },
                 { "measure": 1.238095238095, "category": "NY" },
                 { "measure": 1.238095238095, "category": "AR" },
                 { "measure": 1.238095238095, "category": "AZ" }]
}
